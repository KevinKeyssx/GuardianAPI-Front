---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Sign In - GuardianApi">
    <script>
        async function setupAuth() {
            try {
                const { createAuthClient } = await import('better-auth/client');
                const authClient = createAuthClient();
                const githubButton = document.getElementById('github-signin');

                if (githubButton) {
                    githubButton.addEventListener('click', async () => {
                        try {
                            const data = await authClient.signIn.social({
                                provider: "github"
                            });
                            console.log('Sign in successful:', data);
                        } catch (error) {
                            console.error('Sign in failed:', error);
                        }
                    });
                }
            } catch (error) {
                console.error('Error setting up auth:', error);
            }
        }

        document.addEventListener('DOMContentLoaded', setupAuth);
    </script>

    <div class="min-h-screen mx-auto flex items-center justify-center px-4 py-24">
        <div class="w-full mx-auto max-w-md bg-dark-blue/50 p-8 rounded-lg border border-neon-blue/20 animate-fade-in">
            <h2 class="text-3xl font-orbitron text-neon-blue text-center mb-8">Sign In</h2>

            <form class="space-y-6">
                <button
                id="github-signin"
                type="button"
                class="w-full bg-neon-blue text-dark-blue font-bold py-3 rounded-lg hover:bg-opacity-80 transition-all duration-300"
            >
                Sign In with GitHub
            </button>
                <div>
                    <label class="block text-gray-300 mb-2" for="email">Email</label>

                    <input
                        type="email"
                        id="email"
                        class="w-full px-4 py-2 bg-space-blue border border-neon-blue/30 rounded-lg focus:border-neon-blue focus:outline-none text-white"
                        required
                    />
                </div>

                <div>
                    <label class="block text-gray-300 mb-2" for="password">Password</label>

                    <input
                        type="password"
                        id="password"
                        class="w-full px-4 py-2 bg-space-blue border border-neon-blue/30 rounded-lg focus:border-neon-blue focus:outline-none text-white"
                        required
                    />
                </div>

                <button
                    type="submit"
                    class="w-full bg-neon-blue text-dark-blue font-bold py-3 rounded-lg hover:bg-opacity-80 transition-all duration-300"
                >
                    Sign In
                </button>
            </form>

            <p class="text-center mt-6 text-gray-400">
                Don't have an account?

                <a href="/signup" class="text-neon-blue hover:underline">Sign Up</a>
            </p>
        </div>
    </div>
</Layout>

<style>
    .animate-fade-in {
        animation: fadeIn 0.6s ease-out;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>