---
import Paginations      from "@/components/shared/Paginations.astro";
import Panel            from "@/components/shared/Panel.astro";
import Table            from "@/components/shared/table/Table.astro";
import TableData        from "@/components/shared/table/TableData.astro";
import TableRow         from "@/components/shared/table/TableRow.astro";
import UserForm         from "@/components/dashboard/users/UserForm.astro";
import Filter           from "@/components/inputs/Filter.astro";
import OpenPanelIcon    from "@/icons/OpenPanelIcon.astro";


const mockUsers = [
    { id: 1, name: 'John Doe', email: 'john@example.com', role: 'Admin', lastLogin: '2025-04-17T15:32:45Z' },
    { id: 2, name: 'Jane Smith', email: 'jane@example.com', role: 'Developer', lastLogin: '2025-04-16T09:15:22Z' },
    { id: 3, name: 'Alex Johnson', email: 'alex@example.com', role: 'User', lastLogin: '2025-04-15T18:45:10Z' },
];

const columns = ['Name', 'Email', 'Role', 'Last Login', 'Actions'];
---

<div class="animate-fade-in">
    <h1 class="text-2xl font-orbitron text-white mb-6">Users</h1>

    <div class="flex justify-between items-center mb-4 gap-2 sm:gap-4">
        <Filter />

        <Panel
            id                  = "add-user"
            title               = "Add User"
            saveButtonText      = "Add"
            buttonText          = "Add User"
        >
            <UserForm id="delete-user" />
        </Panel>
    </div>

    <Table {columns}>
        {mockUsers.map(user => (
            <TableRow>
                <TableData>{user.name}</TableData>
                <TableData>{user.email}</TableData>
                <TableData>
                    <span class={`px-2 py-1 text-xs rounded-full ${user.role === 'Admin' ? 'bg-red-900/30 text-red-300' : user.role === 'Developer' ? 'bg-blue-900/30 text-blue-300' : 'bg-green-900/30 text-green-300'}`}>
                        {user.role}
                    </span>
                </TableData>
                <TableData>{new Date(user.lastLogin).toLocaleString()}</TableData>
                <TableData size="text-sm font-medium" float={true}>
                    <button class="text-neon-blue hover:text-neon-blue/80">
                        <OpenPanelIcon />
                    </button>
                </TableData>
            </TableRow>
        ))}
    </Table>

    <!-- Pagination -->
    <Paginations totalItems={mockUsers.length} itemsPerPage={5} currentPage={1} />
</div>