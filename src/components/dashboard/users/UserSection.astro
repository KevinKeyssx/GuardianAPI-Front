---
import Paginations      from "@/components/shared/Paginations.astro";
import Panel            from "@/components/shared/Panel.astro";
import Table            from "@/components/shared/table/Table.astro";
import TableData        from "@/components/shared/table/TableData.astro";
import TableRow         from "@/components/shared/table/TableRow.astro";
import UserForm         from "@/components/dashboard/users/UserForm.astro";
import OpenPanelIcon    from "@/icons/OpenPanelIcon.astro";


const mockUsers = [
    { id: 1, name: 'John Doe', email: 'john@example.com', role: 'Admin', lastLogin: '2025-04-17T15:32:45Z' },
    { id: 2, name: 'Jane Smith', email: 'jane@example.com', role: 'Developer', lastLogin: '2025-04-16T09:15:22Z' },
    { id: 3, name: 'Alex Johnson', email: 'alex@example.com', role: 'User', lastLogin: '2025-04-15T18:45:10Z' },
];

const columns = ['Name', 'Email', 'Role', 'Last Login', 'Actions'];
---

<div class="animate-fade-in">
    <h1 class="text-2xl font-orbitron text-white mb-6">Users</h1>

    <div class="flex justify-between items-center mb-4 gap-2 sm:gap-4">
        <div class="relative w-64">
            <input type="text" placeholder="Search users..." class="search-input w-full bg-dark-blue/30 border border-neon-blue/30 rounded-md py-2 pl-10 pr-4 text-white placeholder-gray-400 focus:outline-none focus:border-neon-blue/60" data-section="users">

            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
            </div>
        </div>

        <Panel
            id                  = "add-user"
            title               = "Add User"
            saveButtonText      = "Add"
            buttonText          = "Add User"
        >
            <UserForm id="delete-user" />
        </Panel>
    </div>

    <Table {columns}>
        {mockUsers.map(user => (
            <TableRow>
                <TableData>{user.name}</TableData>
                <TableData>{user.email}</TableData>
                <TableData>
                    <span class={`px-2 py-1 text-xs rounded-full ${user.role === 'Admin' ? 'bg-red-900/30 text-red-300' : user.role === 'Developer' ? 'bg-blue-900/30 text-blue-300' : 'bg-green-900/30 text-green-300'}`}>
                        {user.role}
                    </span>
                </TableData>
                <TableData>{new Date(user.lastLogin).toLocaleString()}</TableData>
                <TableData size="text-sm font-medium" float={true}>
                    <button class="text-neon-blue hover:text-neon-blue/80">
                        <OpenPanelIcon />
                    </button>
                </TableData>
            </TableRow>
        ))}
    </Table>

    <!-- Pagination -->
    <Paginations totalItems={mockUsers.length} itemsPerPage={5} currentPage={1} />
</div>