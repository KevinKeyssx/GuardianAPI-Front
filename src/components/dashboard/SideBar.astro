---
import type { Session } from '@auth/core/types';
// Icons
import OverviewIcon     from '@/icons/OverviewIcon.astro';
import UsersIcon        from '@/icons/UsersIcon.astro';
import AttributesIcon   from '@/icons/AttributesIcon.astro';
import SecretIcon       from '@/icons/SecretIcon.astro';
import RoleIcon         from '@/icons/RoleIcon.astro';
import ShieldIcon       from '@/icons/ShieldIcon.astro';
// Components
import Logout from '@/components/auth/Logout.astro';


export interface Props {
    activeSection   : string;
    session         : Session;
}

const { activeSection, session } = Astro.props;

const sidebarItems = [
    { id: 'overview',   name: 'Overview',              icon: OverviewIcon },
    { id: 'users',      name: 'Users',                 icon: UsersIcon },
    { id: 'attributes', name: 'User Attributes',       icon: AttributesIcon },
    { id: 'secrets',    name: 'API Secrets',           icon: SecretIcon },
    { id: 'roles',      name: 'Roles & Permissions',   icon: RoleIcon },
];
---

<aside class="hidden w-14 lg:w-64 bg-dark-blue/70 border-r border-neon-blue/20 sm:flex flex-col mt-12">
    <header class="p-4 border-b border-neon-blue/20">
        <h2 class="text-2xl font-orbitron text-neon-blue flex items-center gap-2">
            <ShieldIcon />

            <span class="hidden lg:block">
                Menu<span class="text-white">Api</span>
            </span>
        </h2>
    </header>

    <section class="overflow-y-auto flex-grow">
        <nav class="mt-4">
            <ul>
                {sidebarItems.map(item => (
                    <li class="mb-2">
                        <a 
                            href    = { `/dashboard?section=${item.id}` }
                            class   = { `flex items-center px-4 py-3 text-sm transition-colors duration-300 ${activeSection === item.id ? 'bg-neon-blue/10 text-neon-blue border-l-2 border-neon-blue' : 'text-gray-300 hover:bg-neon-blue/5 hover:text-neon-blue'}` }
                        >
                            <span class="flex items-center">
                                {<item.icon />}
                            </span>

                            <span class="hidden lg:block">
                                {item.name}
                            </span>
                        </a>
                    </li>
                ))}
            </ul>
        </nav>
    </section>

    <footer class="p-2 py-4 lg:p-4 border-t border-neon-blue/20 space-y-6 lg:space-y-4">
        <div class="flex items-center">
            <img
                src     = { session.user?.image }
                alt     = { session.user?.name || 'User' }
                class   = "w-8 h-8 rounded-full mx-auto lg:mx-0"
            />

            <div class="hidden lg:block lg:ml-3">
                <p class="text-sm font-medium text-white truncate">{session.user?.name || 'User'}</p>
                <p class="text-xs text-gray-400 truncate">{session.user?.email || ''}</p>
            </div>
        </div>

        <Logout class="lg:px-4 lg:py-2 bg-dark-blue hover:bg-neon-blue/20 rounded-md transition-colors duration-300"/>
    </footer>
</aside>