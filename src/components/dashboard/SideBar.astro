---
import type { Session } from '@auth/core/types';
// Icons
import OverviewIcon     from '@/icons/OverviewIcon.astro';
import UsersIcon        from '@/icons/UsersIcon.astro';
import AttributesIcon   from '@/icons/AttributesIcon.astro';
import SecretIcon       from '@/icons/SecretIcon.astro';
import RoleIcon         from '@/icons/RoleIcon.astro';
import ShieldIcon       from '@/icons/ShieldIcon.astro';
// Components
import Logout from '@/components/auth/Logout.astro';


export interface Props {
    activeSection   : string;
    session         : Session;
}

const { activeSection, session } = Astro.props;

const sidebarItems = [
    { id: 'overview',   name: 'Overview',              icon: OverviewIcon },
    { id: 'users',      name: 'Users',                 icon: UsersIcon },
    { id: 'attributes', name: 'User Attributes',       icon: AttributesIcon },
    { id: 'secrets',    name: 'API Secrets',           icon: SecretIcon },
    { id: 'roles',      name: 'Roles & Permissions',   icon: RoleIcon },
];
---

<aside class="w-64 bg-dark-blue/70 border-r border-neon-blue/20 flex flex-col mt-12">
    <header class="p-4 border-b border-neon-blue/20">
        <h2 class="text-2xl font-orbitron text-neon-blue flex items-center gap-2">
            <ShieldIcon />
            Menu<span class="text-white">Api</span>
        </h2>
    </header>

    <div class="overflow-y-auto flex-grow">
        <nav class="mt-4">
            <ul>
                {sidebarItems.map(item => (
                    <li class="mb-2">
                        <a 
                            href    = { `/dashboard?section=${item.id}` }
                            class   = { `flex items-center px-4 py-3 text-sm transition-colors duration-300 ${activeSection === item.id ? 'bg-neon-blue/10 text-neon-blue border-l-2 border-neon-blue' : 'text-gray-300 hover:bg-neon-blue/5 hover:text-neon-blue'}` }
                        >
                            {<item.icon />}

                            {item.name}
                        </a>
                    </li>
                ))}
            </ul>
        </nav>
    </div>

    <footer class="p-4 border-t border-neon-blue/20 space-y-4">
        <div class="flex items-center">
            <div class="w-8 h-8 rounded-full bg-neon-blue/30 flex items-center justify-center text-white">
                {session.user?.name?.charAt(0).toUpperCase() || 'U'}
            </div>

            <div class="ml-3">
                <p class="text-sm font-medium text-white truncate">{session.user?.name || 'User'}</p>
                <p class="text-xs text-gray-400 truncate">{session.user?.email || ''}</p>
            </div>
        </div>

        <Logout class="px-4 py-2 bg-dark-blue hover:bg-neon-blue/20 rounded-md transition-colors duration-300"/>
    </footer>
</aside>